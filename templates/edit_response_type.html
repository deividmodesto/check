{% extends 'base.html' %}
{% block title %}Editar Tipo de Resposta{% endblock %}
{% block content %}
<form class="form-card" method="POST" action="{{ url_for('edit_response_type', type_id=response_type.details.ID) }}">
    <h2>Editando: {{ response_type.details.Nome }}</h2>
    
    <div class="form-group">
        <label for="name">Nome do Conjunto</label>
        <input type="text" id="name" name="name" value="{{ response_type.details.Nome }}" required>
    </div>
    
    <div class="form-group">
        <label>Opções de Resposta (Marque a opção que significa "Conforme")</label>
        <div id="options-container">
            {% for option in response_type.options %}
            <div class="option-row">
                <input type="radio" name="is_conforme_radio" value="{{ loop.index0 }}" {% if option.IsConforme %}checked{% endif %}>
                <input type="text" name="options_text[]" value="{{ option.TextoOpcao }}" required>
                <button type="button" class="btn-remove-option" onclick="this.parentElement.remove()">X</button>
            </div>
            {% endfor %}
        </div>
        <button type="button" id="add-option-btn" class="btn-secondary" style="margin-top: 10px;">Adicionar outra opção</button>
    </div>

    <button type="submit">Salvar Alterações</button>
    <a href="{{ url_for('manage_response_types') }}" class="btn-secondary" style="background-color: #6c757d; text-decoration: none;">Cancelar</a>
</form>

<script>
document.getElementById('add-option-btn').addEventListener('click', function() {
    const container = document.getElementById('options-container');
    const newIndex = container.children.length;
    const newRow = document.createElement('div');
    newRow.className = 'option-row';
    newRow.innerHTML = `
        <input type="radio" name="is_conforme_radio" value="${newIndex}">
        <input type="text" name="options_text[]" placeholder="Novo texto da opção" required>
        <button type="button" class="btn-remove-option" onclick="this.parentElement.remove()">X</button>
    `;
    container.appendChild(newRow);
});
</script>

<style>
    .option-row {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
    }
    .option-row input[type="text"] {
        flex-grow: 1;
    }
    .btn-remove-option {
        background-color: #dc3545;
        color: white;
        border: none;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
    }
</style>
{% endblock %}